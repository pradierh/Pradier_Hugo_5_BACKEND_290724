[{"/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/index.js":"1","/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/reportWebVitals.js":"2","/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/App.jsx":"3","/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/utils/constants.js":"4","/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/lib/customHooks.js":"5","/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/pages/Book/Book.jsx":"6","/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/pages/Home/Home.jsx":"7","/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/pages/SignIn/SignIn.jsx":"8","/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/pages/AddBook/AddBook.jsx":"9","/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/pages/updateBook/UpdateBook.jsx":"10","/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/components/Header/Header.jsx":"11","/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/components/Footer/Footer.jsx":"12","/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/components/ScrollToTop/ScrollToTop.jsx":"13","/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/lib/common.js":"14","/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/components/BackArrow/BackArrow.jsx":"15","/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/components/Books/BestRatedBooks/BestRatedBooks.jsx":"16","/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/components/Books/BookInfo/BookInfo.jsx":"17","/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/components/Books/BookRatingForm/BookRatingForm.jsx":"18","/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/components/Books/BookForm/BookForm.jsx":"19","/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/components/Books/BookItem/BookItem.jsx":"20","/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/lib/functions.jsx":"21"},{"size":592,"mtime":1723363568686,"results":"22","hashOfConfig":"23"},{"size":375,"mtime":1723363568687,"results":"24","hashOfConfig":"23"},{"size":1337,"mtime":1723363568680,"results":"25","hashOfConfig":"23"},{"size":402,"mtime":1723363568687,"results":"26","hashOfConfig":"23"},{"size":1336,"mtime":1723363568686,"results":"27","hashOfConfig":"23"},{"size":3754,"mtime":1723363568687,"results":"28","hashOfConfig":"23"},{"size":1378,"mtime":1723363568687,"results":"29","hashOfConfig":"23"},{"size":4351,"mtime":1723363568687,"results":"30","hashOfConfig":"23"},{"size":1396,"mtime":1723363568687,"results":"31","hashOfConfig":"23"},{"size":1754,"mtime":1723363568687,"results":"32","hashOfConfig":"23"},{"size":1324,"mtime":1723363568682,"results":"33","hashOfConfig":"23"},{"size":903,"mtime":1723363568682,"results":"34","hashOfConfig":"23"},{"size":246,"mtime":1723363568682,"results":"35","hashOfConfig":"23"},{"size":4315,"mtime":1723451153932,"results":"36","hashOfConfig":"23"},{"size":410,"mtime":1723363568681,"results":"37","hashOfConfig":"23"},{"size":703,"mtime":1723363568681,"results":"38","hashOfConfig":"23"},{"size":1082,"mtime":1723363568681,"results":"39","hashOfConfig":"23"},{"size":2055,"mtime":1723363568682,"results":"40","hashOfConfig":"23"},{"size":4165,"mtime":1723363568681,"results":"41","hashOfConfig":"23"},{"size":1472,"mtime":1723363568681,"results":"42","hashOfConfig":"23"},{"size":1678,"mtime":1723363568686,"results":"43","hashOfConfig":"23"},{"filePath":"44","messages":"45","suppressedMessages":"46","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},"1085pkv",{"filePath":"48","messages":"49","suppressedMessages":"50","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"51","messages":"52","suppressedMessages":"53","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"54","messages":"55","suppressedMessages":"56","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"57","messages":"58","suppressedMessages":"59","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"60","messages":"61","suppressedMessages":"62","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"63","usedDeprecatedRules":"47"},{"filePath":"64","messages":"65","suppressedMessages":"66","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"67","messages":"68","suppressedMessages":"69","errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"70","usedDeprecatedRules":"47"},{"filePath":"71","messages":"72","suppressedMessages":"73","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"74","messages":"75","suppressedMessages":"76","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"77","messages":"78","suppressedMessages":"79","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"80","messages":"81","suppressedMessages":"82","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"83","messages":"84","suppressedMessages":"85","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"86","messages":"87","suppressedMessages":"88","errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"89","messages":"90","suppressedMessages":"91","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"92","messages":"93","suppressedMessages":"94","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"95","messages":"96","suppressedMessages":"97","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"98","messages":"99","suppressedMessages":"100","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"101","usedDeprecatedRules":"47"},{"filePath":"102","messages":"103","suppressedMessages":"104","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"105","usedDeprecatedRules":"47"},{"filePath":"106","messages":"107","suppressedMessages":"108","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"109","messages":"110","suppressedMessages":"111","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},"/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/index.js",[],["112"],["113","114","115","116","117","118"],"/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/reportWebVitals.js",[],[],"/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/App.jsx",[],[],"/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/utils/constants.js",[],[],"/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/lib/customHooks.js",[],[],"/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/pages/Book/Book.jsx",["119"],["120"],"/* eslint-disable react/jsx-props-no-spreading */\n\nimport React, { useEffect, useState } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { useUser } from '../../lib/customHooks';\nimport styles from './Book.module.css';\nimport { getBook, deleteBook } from '../../lib/common';\nimport BookInfo from '../../components/Books/BookInfo/BookInfo';\nimport BookRatingForm from '../../components/Books/BookRatingForm/BookRatingForm';\nimport BookDeleteImage from '../../images/book_delete.png';\nimport BestRatedBooks from '../../components/Books/BestRatedBooks/BestRatedBooks';\nimport BackArrow from '../../components/BackArrow/BackArrow';\n\nfunction Book() {\n  const { connectedUser, userLoading } = useUser();\n  const [book, setBook] = useState(null);\n  const [rating, setRating] = useState(0);\n  const [userRated, setUserRated] = useState(false);\n  const [loading, setLoading] = useState(true);\n\n  const params = useParams();\n\n  useEffect(() => {\n    async function getItem() {\n      const data = await getBook(params.id);\n      if (data) {\n        setBook(data);\n      }\n    }\n    getItem();\n  }, [params.id]);\n\n  useEffect(() => {\n    if (!userLoading && connectedUser && book?.title) {\n      const rate = book.ratings.find((elt) => elt.userId === connectedUser.userId);\n      if (rate) {\n        setUserRated(true);\n        setRating(parseInt(rate.grade, 10));\n        setLoading(false);\n      } else {\n        setUserRated(false);\n        setRating(0);\n        setLoading(false);\n      }\n    } else if (!userLoading && !connectedUser && book) {\n      setLoading(false);\n    }\n  }, [book, userLoading]);\n\n  const onDelete = async (e) => {\n    if (e.key && e.key !== 'Enter') {\n      return;\n    }\n    // eslint-disable-next-line no-restricted-globals\n    const check = confirm('Etes vous sûr de vouloir supprimer ce livre ?');\n    if (check) {\n      const del = await deleteBook(book.id);\n      if (del) {\n        setBook((oldValue) => ({ ...oldValue, delete: true }));\n      }\n    }\n  };\n\n  const loadingContent = (<h1>Chargement ...</h1>);\n\n  const bookContent = !loading && !book.delete ? (\n    <div>\n      <div className={styles.Book}>\n        <div className={styles.BookImage} style={{ backgroundImage: `url(\"${book.imageUrl}\")` }} />\n        <div className={styles.BookContent}>\n          {book?.userId === connectedUser?.userId ? (\n            <div className={styles.Owner}>\n              <p>Vous avez publié cet ouvrage, vous pouvez le :</p>\n              <p>\n                <Link to={`/livre/modifier/${book.id}`}>modifier</Link>\n                {' '}\n                <span tabIndex={0} role=\"button\" onKeyUp={onDelete} onClick={onDelete}>supprimer</span>\n                {' '}\n              </p>\n            </div>\n          ) : null}\n          <BookInfo book={book} />\n          <BookRatingForm\n            userRated={userRated}\n            userId={connectedUser?.userId}\n            rating={rating}\n            setRating={setRating}\n            setBook={setBook}\n            id={book.id}\n          />\n        </div>\n      </div>\n      <hr />\n      <BestRatedBooks />\n    </div>\n  ) : null;\n  const deletedContent = book?.delete ? (\n    <div className={styles.Deleted}>\n      <h1>{book.title}</h1>\n      <p>a bien été supprimé</p>\n      <img src={BookDeleteImage} alt={`Le livre ${book.title} a bien été supprimé`} />\n      <Link to=\"/\">\n        <button type=\"button\">{'Retour à l\\'accueil'}</button>\n      </Link>\n    </div>\n  ) : null;\n\n  return (\n    <div className=\"content-container\">\n      <BackArrow />\n      {loading ? loadingContent : null}\n      <div className={styles.BookContainer}>\n        {bookContent}\n      </div>\n      {book?.delete ? deletedContent : null}\n\n    </div>\n  );\n}\nexport default Book;\n","/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/pages/Home/Home.jsx",[],["121"],"/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/pages/SignIn/SignIn.jsx",["122","123","124","125","126"],[],"import React, { useState } from 'react';\nimport axios from 'axios';\nimport * as PropTypes from 'prop-types';\nimport { useNavigate } from 'react-router-dom';\nimport { API_ROUTES, APP_ROUTES } from '../../utils/constants';\nimport { useUser } from '../../lib/customHooks';\nimport { storeInLocalStorage } from '../../lib/common';\nimport { ReactComponent as Logo } from '../../images/Logo.svg';\nimport styles from './SignIn.module.css';\n\nfunction SignIn({ setUser }) {\n  const navigate = useNavigate();\n  const { user, authenticated } = useUser();\n  if (user || authenticated) {\n    navigate(APP_ROUTES.DASHBOARD);\n  }\n\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [notification, setNotification] = useState({ error: false, message: '' });\n  const signIn = async () => {\n    try {\n      setIsLoading(true);\n      const response = await axios({\n        method: 'post',\n        url: API_ROUTES.SIGN_IN,\n        data: {\n          email,\n          password,\n        },\n      });\n      if (!response?.data?.token) {\n        setNotification({ error: true, message: 'Une erreur est survenue' });\n        console.log('Something went wrong during signing in: ', response);\n      } else {\n        storeInLocalStorage(response.data.token, response.data.userId);\n        setUser(response.data);\n        navigate('/');\n      }\n    } catch (err) {\n      console.log(err);\n      setNotification({ error: true, message: err.message });\n      console.log('Some error occured during signing in: ', err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const signUp = async () => {\n    try {\n      setIsLoading(true);\n      const response = await axios({\n        method: 'POST',\n        url: API_ROUTES.SIGN_UP,\n        data: {\n          email,\n          password,\n        },\n      });\n      if (!response?.data) {\n        console.log('Something went wrong during signing up: ', response);\n        return;\n      }\n      setNotification({ error: false, message: 'Votre compte a bien été créé, vous pouvez vous connecter' });\n    } catch (err) {\n      setNotification({ error: true, message: err.message });\n      console.log('Some error occured during signing up: ', err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const errorClass = notification.error ? styles.Error : null;\n  return (\n    <div className={`${styles.SignIn} container`}>\n      <Logo />\n      <div className={`${styles.Notification} ${errorClass}`}>\n        {notification.message.length > 0 && <p>{notification.message}</p>}\n      </div>\n      <div className={styles.Form}>\n        <label htmlFor={email}>\n          <p>Adresse email</p>\n          <input\n            className=\"\"\n            type=\"text\"\n            name=\"email\"\n            id=\"email\"\n            value={email}\n            onChange={(e) => { setEmail(e.target.value); }}\n          />\n        </label>\n        <label htmlFor=\"password\">\n          <p>Mot de passe</p>\n          <input\n            className=\"border-2 outline-none p-2 rounded-md\"\n            type=\"password\"\n            name=\"password\"\n            id=\"password\"\n            value={password}\n            onChange={(e) => { setPassword(e.target.value); }}\n          />\n        </label>\n        <div className={styles.Submit}>\n          <button\n            type=\"submit\"\n            className=\"\n            flex justify-center\n            p-2 rounded-md w-1/2 self-center\n            bg-gray-800  text-white hover:bg-gray-800\"\n            onClick={signIn}\n          >\n            {isLoading ? <div className=\"\" /> : null}\n            <span>\n              Se connecter\n            </span>\n          </button>\n          <span>OU</span>\n          <button\n            type=\"submit\"\n            className=\"\n            flex justify-center\n            p-2 rounded-md w-1/2 self-center\n            bg-gray-800  text-white hover:bg-gray-800\"\n            onClick={signUp}\n          >\n            {\n                isLoading\n                  ? <div className=\"mr-2 w-5 h-5 border-l-2 rounded-full animate-spin\" /> : null\n              }\n            <span>\n              {'S\\'inscrire'}\n            </span>\n          </button>\n        </div>\n\n      </div>\n    </div>\n  );\n}\n\nSignIn.propTypes = {\n  setUser: PropTypes.func.isRequired,\n};\nexport default SignIn;\n","/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/pages/AddBook/AddBook.jsx",[],[],"/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/pages/updateBook/UpdateBook.jsx",[],[],"/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/components/Header/Header.jsx",[],[],"/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/components/Footer/Footer.jsx",[],[],"/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/components/ScrollToTop/ScrollToTop.jsx",[],[],"/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/lib/common.js",["127","128","129","130","131","132","133","134","135","136"],["137","138","139"],"/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/components/BackArrow/BackArrow.jsx",[],[],"/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/components/Books/BestRatedBooks/BestRatedBooks.jsx",[],[],"/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/components/Books/BookInfo/BookInfo.jsx",[],[],"/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/components/Books/BookRatingForm/BookRatingForm.jsx",["140","141"],["142"],"import * as PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useForm } from 'react-hook-form';\nimport styles from './BookRatingForm.module.css';\nimport { generateStarsInputs, displayStars } from '../../../lib/functions';\nimport { APP_ROUTES } from '../../../utils/constants';\nimport { useUser } from '../../../lib/customHooks';\nimport { rateBook } from '../../../lib/common';\n\nfunction BookRatingForm({\n  rating, setRating, userId, setBook, id, userRated,\n}) {\n  const { connectedUser, auth } = useUser();\n  const navigate = useNavigate();\n  const { register, formState, handleSubmit } = useForm({\n    mode: 'onChange',\n    defaultValues: {\n      rating: 0,\n    },\n  });\n  useEffect(() => {\n    if (formState.dirtyFields.rating) {\n      const rate = document.querySelector('input[name=\"rating\"]:checked').value;\n      setRating(parseInt(rate, 10));\n      formState.dirtyFields.rating = false;\n    }\n  }, [formState]);\n  const onSubmit = async () => {\n    if (!connectedUser || !auth) {\n      navigate(APP_ROUTES.SIGN_IN);\n    }\n    const update = await rateBook(id, userId, rating);\n    console.log(update);\n    if (update) {\n      // eslint-disable-next-line no-underscore-dangle\n      setBook({ ...update, id: update._id });\n    } else {\n      alert(update);\n    }\n  };\n  return (\n    <div className={styles.BookRatingForm}>\n      <form onSubmit={handleSubmit(onSubmit)}>\n        <p>{rating > 0 ? 'Votre Note' : 'Notez cet ouvrage'}</p>\n        <div className={styles.Stars}>\n          {!userRated ? generateStarsInputs(rating, register) : displayStars(rating)}\n        </div>\n        {!userRated ? <button type=\"submit\">Valider</button> : null}\n      </form>\n    </div>\n  );\n}\n\nBookRatingForm.propTypes = {\n  rating: PropTypes.number.isRequired,\n  setRating: PropTypes.func.isRequired,\n  userId: PropTypes.string.isRequired,\n  setBook: PropTypes.func.isRequired,\n  id: PropTypes.string.isRequired,\n  userRated: PropTypes.bool.isRequired,\n};\n\nexport default BookRatingForm;\n","/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/components/Books/BookForm/BookForm.jsx",["143","144","145"],["146","147","148","149","150","151","152"],"/* eslint-disable react/jsx-props-no-spreading */\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport * as PropTypes from 'prop-types';\nimport { useNavigate } from 'react-router-dom';\nimport { generateStarsInputs } from '../../../lib/functions';\nimport { useFilePreview } from '../../../lib/customHooks';\nimport addFileIMG from '../../../images/add_file.png';\nimport styles from './BookForm.module.css';\nimport { updateBook, addBook } from '../../../lib/common';\n\nfunction BookForm({ book, validate }) {\n  const userRating = book ? book.ratings.find((elt) => elt.userId === localStorage.getItem('userId'))?.grade : 0;\n\n  const [rating, setRating] = useState(0);\n\n  const navigate = useNavigate();\n  const {\n    register, watch, formState, handleSubmit, reset,\n  } = useForm({\n    defaultValues: useMemo(() => ({\n      title: book?.title,\n      author: book?.author,\n      year: book?.year,\n      genre: book?.genre,\n    }), [book]),\n  });\n  useEffect(() => {\n    reset(book);\n  }, [book]);\n  const file = watch(['file']);\n  const [filePreview] = useFilePreview(file);\n\n  useEffect(() => {\n    setRating(userRating);\n  }, [userRating]);\n\n  useEffect(() => {\n    if (!book && formState.dirtyFields.rating) {\n      const rate = document.querySelector('input[name=\"rating\"]:checked').value;\n      setRating(parseInt(rate, 10));\n      formState.dirtyFields.rating = false;\n    }\n  }, [formState]);\n\n  const onSubmit = async (data) => {\n    // When we create a new book\n    if (!book) {\n      if (!data.file[0]) {\n        alert('Vous devez ajouter une image');\n      }\n      if (!data.rating) {\n        /* eslint-disable no-param-reassign */\n        data.rating = 0;\n        /* eslint-enable no-param-reassign */\n      }\n      const newBook = await addBook(data);\n      if (!newBook.error) {\n        validate(true);\n      } else {\n        alert(newBook.message);\n      }\n    } else {\n      const updatedBook = await updateBook(data, data.id);\n      if (!updatedBook.error) {\n        navigate('/');\n      } else {\n        alert(updatedBook.message);\n      }\n    }\n  };\n\n  const readOnlyStars = !!book;\n  return (\n    <form onSubmit={handleSubmit(onSubmit)} className={styles.Form}>\n      <input type=\"hidden\" id=\"id\" {...register('id')} />\n      <label htmlFor=\"title\">\n        <p>Titre du livre</p>\n        <input type=\"text\" id=\"title\" {...register('title')} />\n      </label>\n      <label htmlFor=\"author\">\n        <p>Auteur</p>\n        <input type=\"text\" id=\"author\" {...register('author')} />\n      </label>\n      <label htmlFor=\"year\">\n        <p>Année de publication</p>\n        <input type=\"text\" id=\"year\" {...register('year')} />\n      </label>\n      <label htmlFor=\"genre\">\n        <p>Genre</p>\n        <input type=\"text\" id=\"genre\" {...register('genre')} />\n      </label>\n      <label htmlFor=\"rate\">\n        <p>Note</p>\n        <div className={styles.Stars}>\n          {generateStarsInputs(rating, register, readOnlyStars)}\n        </div>\n      </label>\n      <label htmlFor=\"file\">\n        <p>Visuel</p>\n        <div className={styles.AddImage}>\n          {filePreview || book?.imageUrl ? (\n            <>\n              <img src={filePreview ?? book?.imageUrl} alt=\"preview\" />\n              <p>Modifier</p>\n            </>\n          ) : (\n            <>\n              <img src={addFileIMG} alt=\"Add file\" />\n              <p>Ajouter une image</p>\n            </>\n          )}\n\n        </div>\n        <input {...register('file')} type=\"file\" id=\"file\" />\n      </label>\n      <button type=\"submit\">Publier</button>\n    </form>\n  );\n}\n\nBookForm.propTypes = {\n  book: PropTypes.shape({\n    id: PropTypes.string,\n    _id: PropTypes.string,\n    userId: PropTypes.string,\n    title: PropTypes.string,\n    author: PropTypes.string,\n    year: PropTypes.number,\n    imageUrl: PropTypes.string,\n    genre: PropTypes.string,\n    ratings: PropTypes.arrayOf(PropTypes.shape({\n      userId: PropTypes.string,\n      grade: PropTypes.number,\n    })),\n    averageRating: PropTypes.number,\n  }),\n  validate: PropTypes.func,\n};\n\nBookForm.defaultProps = {\n  book: null,\n  validate: null,\n};\nexport default BookForm;\n","/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/components/Books/BookItem/BookItem.jsx",[],[],"/Users/hugopradier/github/Pradier_Hugo_6_BACKEND_290724/frontendLast/src/lib/functions.jsx",[],["153","154"],{"ruleId":"155","severity":2,"message":"156","line":13,"column":3,"nodeType":"157","messageId":"158","endLine":15,"endColumn":22,"suppressions":"159"},{"ruleId":"160","replacedBy":"161"},{"ruleId":"162","replacedBy":"163"},{"ruleId":"164","replacedBy":"165"},{"ruleId":"166","replacedBy":"167"},{"ruleId":"168","replacedBy":"169"},{"ruleId":"170","replacedBy":"171"},{"ruleId":"172","severity":1,"message":"173","line":55,"column":19,"nodeType":"174","messageId":"175","endLine":55,"endColumn":75},{"ruleId":"176","severity":2,"message":"177","line":55,"column":19,"nodeType":"178","messageId":"179","endLine":55,"endColumn":26,"suppressions":"180"},{"ruleId":"181","severity":2,"message":"182","line":12,"column":1,"nodeType":"183","messageId":"184","endLine":12,"endColumn":125,"suppressions":"185"},{"ruleId":"186","severity":1,"message":"187","line":35,"column":9,"nodeType":"188","messageId":"175","endLine":35,"endColumn":20},{"ruleId":"186","severity":1,"message":"187","line":42,"column":7,"nodeType":"188","messageId":"175","endLine":42,"endColumn":18},{"ruleId":"186","severity":1,"message":"187","line":44,"column":7,"nodeType":"188","messageId":"175","endLine":44,"endColumn":18},{"ruleId":"186","severity":1,"message":"187","line":62,"column":9,"nodeType":"188","messageId":"175","endLine":62,"endColumn":20},{"ruleId":"186","severity":1,"message":"187","line":68,"column":7,"nodeType":"188","messageId":"175","endLine":68,"endColumn":18},{"ruleId":"186","severity":1,"message":"187","line":5,"column":3,"nodeType":"188","messageId":"175","endLine":5,"endColumn":14},{"ruleId":"186","severity":1,"message":"187","line":33,"column":5,"nodeType":"188","messageId":"175","endLine":33,"endColumn":18},{"ruleId":"186","severity":1,"message":"187","line":48,"column":5,"nodeType":"188","messageId":"175","endLine":48,"endColumn":18},{"ruleId":"186","severity":1,"message":"187","line":64,"column":5,"nodeType":"188","messageId":"175","endLine":64,"endColumn":18},{"ruleId":"186","severity":1,"message":"187","line":77,"column":5,"nodeType":"188","messageId":"175","endLine":77,"endColumn":18},{"ruleId":"186","severity":1,"message":"187","line":90,"column":5,"nodeType":"188","messageId":"175","endLine":90,"endColumn":18},{"ruleId":"186","severity":1,"message":"187","line":112,"column":5,"nodeType":"188","messageId":"175","endLine":112,"endColumn":18},{"ruleId":"186","severity":1,"message":"187","line":145,"column":5,"nodeType":"188","messageId":"175","endLine":145,"endColumn":18},{"ruleId":"186","severity":1,"message":"187","line":161,"column":3,"nodeType":"188","messageId":"175","endLine":161,"endColumn":14},{"ruleId":"186","severity":1,"message":"187","line":181,"column":5,"nodeType":"188","messageId":"175","endLine":181,"endColumn":18},{"ruleId":"189","severity":2,"message":"190","line":9,"column":18,"nodeType":"188","messageId":"191","endLine":9,"endColumn":29,"suppressions":"192"},{"ruleId":"189","severity":2,"message":"190","line":61,"column":15,"nodeType":"188","messageId":"191","endLine":61,"endColumn":23,"suppressions":"193"},{"ruleId":"189","severity":2,"message":"190","line":109,"column":15,"nodeType":"188","messageId":"191","endLine":109,"endColumn":23,"suppressions":"194"},{"ruleId":"186","severity":1,"message":"187","line":34,"column":5,"nodeType":"188","messageId":"175","endLine":34,"endColumn":16},{"ruleId":"172","severity":1,"message":"195","line":39,"column":7,"nodeType":"174","messageId":"175","endLine":39,"endColumn":20},{"ruleId":"189","severity":2,"message":"190","line":37,"column":32,"nodeType":"188","messageId":"191","endLine":37,"endColumn":42,"suppressions":"196"},{"ruleId":"172","severity":1,"message":"195","line":50,"column":9,"nodeType":"174","messageId":"175","endLine":50,"endColumn":46},{"ruleId":"172","severity":1,"message":"195","line":61,"column":9,"nodeType":"174","messageId":"175","endLine":61,"endColumn":31},{"ruleId":"172","severity":1,"message":"195","line":68,"column":9,"nodeType":"174","messageId":"175","endLine":68,"endColumn":35},{"ruleId":"197","severity":2,"message":"198","line":54,"column":9,"nodeType":"178","messageId":"199","endLine":54,"endColumn":13,"suppressions":"200"},{"ruleId":"201","severity":2,"message":"202","line":76,"column":36,"nodeType":"203","messageId":"204","endLine":76,"endColumn":55,"suppressions":"205"},{"ruleId":"201","severity":2,"message":"202","line":79,"column":39,"nodeType":"203","messageId":"204","endLine":79,"endColumn":61,"suppressions":"206"},{"ruleId":"201","severity":2,"message":"202","line":83,"column":40,"nodeType":"203","messageId":"204","endLine":83,"endColumn":63,"suppressions":"207"},{"ruleId":"201","severity":2,"message":"202","line":87,"column":38,"nodeType":"203","messageId":"204","endLine":87,"endColumn":59,"suppressions":"208"},{"ruleId":"201","severity":2,"message":"202","line":91,"column":39,"nodeType":"203","messageId":"204","endLine":91,"endColumn":61,"suppressions":"209"},{"ruleId":"201","severity":2,"message":"202","line":115,"column":16,"nodeType":"203","messageId":"204","endLine":115,"endColumn":37,"suppressions":"210"},{"ruleId":"201","severity":2,"message":"202","line":26,"column":59,"nodeType":"203","messageId":"204","endLine":26,"endColumn":82,"suppressions":"211"},{"ruleId":"201","severity":2,"message":"202","line":33,"column":59,"nodeType":"203","messageId":"204","endLine":33,"endColumn":82,"suppressions":"212"},"react/jsx-filename-extension","JSX not allowed in files with extension '.js'","JSXElement","noJSXWithExtension",["213"],"lines-around-directive",["214"],"no-spaced-func",["215"],"global-require",[],"no-buffer-constructor",[],"no-new-require",[],"no-path-concat",[],"no-alert","Unexpected confirm.","CallExpression","unexpected","no-restricted-globals","Unexpected use of 'confirm'.","Identifier","defaultMessage",["216"],"max-len","This line has a length of 124. Maximum allowed is 100.","Program","max",["217"],"no-console","Unexpected console statement.","MemberExpression","no-underscore-dangle","Unexpected dangling '_' in '_id'.","unexpectedUnderscore",["218"],["219"],["220"],"Unexpected alert.",["221"],"no-param-reassign","Assignment to property of function parameter 'data'.","assignmentToFunctionParamProp",["222"],"react/jsx-props-no-spreading","Prop spreading is forbidden","JSXSpreadAttribute","noSpreading",["223"],["224"],["225"],["226"],["227"],["228"],["229"],["230"],{"kind":"231","justification":"232"},"padding-line-between-statements","func-call-spacing",{"kind":"231","justification":"232"},{"kind":"231","justification":"232"},{"kind":"231","justification":"232"},{"kind":"231","justification":"232"},{"kind":"231","justification":"232"},{"kind":"231","justification":"232"},{"kind":"231","justification":"232"},{"kind":"231","justification":"232"},{"kind":"231","justification":"232"},{"kind":"231","justification":"232"},{"kind":"231","justification":"232"},{"kind":"231","justification":"232"},{"kind":"231","justification":"232"},{"kind":"231","justification":"232"},{"kind":"231","justification":"232"},"directive",""]